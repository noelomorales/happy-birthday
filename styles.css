:root {
  --bg: #03050a;
  --accent: #ff124f;
  --accent-alt: #2be6ff;
  --text: #f6f8ff;
  --muted: rgba(246, 248, 255, 0.65);
  --panel: rgba(8, 12, 20, 0.72);
  --panel-border: rgba(255, 255, 255, 0.08);
  --card-border: rgba(43, 230, 255, 0.35);
  --chip-border: rgba(255, 255, 255, 0.18);
  --scan-duration: 3.2s;
  --fuse-duration: 25000ms;
  --warning-duration: 5000ms;
  font-size: 16px;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  min-height: 100%;
  background: var(--bg);
  color: var(--text);
  font-family: "Share Tech Mono", monospace;
  letter-spacing: 0.02em;
  overflow: hidden;
}

body.ready {
  overflow-y: auto;
}

.no-script {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: #000;
  color: #fff;
  z-index: 99;
  font-size: 1.1rem;
}

.scene-backdrop {
  position: fixed;
  inset: 0;
  overflow: hidden;
  z-index: 0;
}

.parallax {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.parallax-stars {
  background: radial-gradient(circle at 20% 20%, rgba(43, 230, 255, 0.18), transparent 45%),
    radial-gradient(circle at 80% 50%, rgba(255, 18, 79, 0.15), transparent 50%),
    repeating-radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.15), transparent 2px 6px);
  animation: twinkle 12s ease-in-out infinite;
}

.parallax-grid {
  background-image: linear-gradient(rgba(43, 230, 255, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(43, 230, 255, 0.1) 1px, transparent 1px);
  background-size: 120px 120px;
  transform: perspective(700px) rotateX(62deg) translateY(25%);
  transform-origin: top;
  opacity: 0.4;
  animation: grid-drift 16s linear infinite;
}

.parallax-glow {
  background: radial-gradient(circle at 15% 20%, rgba(255, 18, 79, 0.35), transparent 60%),
    radial-gradient(circle at 85% 85%, rgba(43, 230, 255, 0.28), transparent 60%);
  filter: blur(50px);
  opacity: 0.7;
}

.boot {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: #000;
  z-index: 50;
  transition: opacity 1s ease;
}

.boot.inactive {
  opacity: 0;
  pointer-events: none;
}

.boot__frame {
  position: relative;
  padding: 3.5rem clamp(3rem, 8vw, 6rem);
  border: 2px solid rgba(255, 18, 79, 0.4);
  background: radial-gradient(circle at center, rgba(40, 0, 20, 0.75), rgba(0, 0, 0, 0.92));
  box-shadow: 0 0 45px rgba(255, 18, 79, 0.45);
  text-align: center;
  overflow: hidden;
}

.scan-mask {
  position: absolute;
  inset: -15%;
  overflow: hidden;
}

.scan-line {
  position: absolute;
  top: -60%;
  width: 120%;
  left: -10%;
  height: 35%;
  background: linear-gradient(
    to bottom,
    rgba(255, 18, 79, 0) 0%,
    rgba(255, 40, 40, 0.45) 30%,
    rgba(255, 20, 60, 0.9) 50%,
    rgba(255, 40, 40, 0.45) 70%,
    rgba(255, 18, 79, 0) 100%
  );
  filter: drop-shadow(0 0 12px rgba(255, 18, 79, 0.5));
  animation: scan var(--scan-duration) ease-in-out infinite;
}

.boot__text {
  font-family: "Orbitron", sans-serif;
  text-transform: uppercase;
  font-size: clamp(1.5rem, 4vw, 2.75rem);
  letter-spacing: 0.6rem;
  margin: 0;
  color: rgba(255, 18, 79, 0.85);
  text-shadow: 0 0 18px rgba(255, 18, 79, 0.7);
  opacity: 0;
  transition: opacity 0.6s ease;
}

.boot__text[data-state="init"].active,
.boot__text[data-state="confirm"].active {
  opacity: 1;
}

.boot__text[data-state="confirm"].active {
  color: var(--accent-alt);
  text-shadow: 0 0 22px rgba(43, 230, 255, 0.95);
}

.boot__sub {
  margin-top: 1.5rem;
  font-size: 0.85rem;
  text-transform: uppercase;
  color: rgba(255, 255, 255, 0.5);
  letter-spacing: 0.3rem;
}

.dossier {
  position: relative;
  z-index: 1;
  padding: clamp(4rem, 8vw, 6rem) clamp(1.5rem, 6vw, 7rem) 7rem;
  opacity: 0;
  transform: translateY(30px) scale(1.03);
  transition: opacity 1s ease, transform 1s ease;
}

body.ready .dossier {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.dossier__header {
  border: 1px solid var(--panel-border);
  background: var(--panel);
  backdrop-filter: blur(16px);
  padding: clamp(2rem, 4vw, 3rem);
  box-shadow: 0 25px 80px rgba(3, 5, 10, 0.8);
}

.dossier__label {
  display: inline-block;
  padding: 0.35rem 1.4rem;
  border: 1px solid var(--chip-border);
  text-transform: uppercase;
  letter-spacing: 0.35rem;
  font-size: 0.75rem;
  color: var(--muted);
}

.dossier__title {
  margin: 1.2rem 0 0.4rem;
  font-family: "Orbitron", sans-serif;
  font-size: clamp(1.9rem, 3vw, 2.8rem);
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

.dossier__meta {
  margin: 0;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.25rem;
  font-size: 0.75rem;
}

.dossier__chips {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-top: 1.8rem;
}

.chip {
  border: 1px solid var(--chip-border);
  padding: 0.45rem 1.2rem;
  border-radius: 999px;
  font-size: 0.75rem;
  letter-spacing: 0.25rem;
  text-transform: uppercase;
  background: rgba(255, 255, 255, 0.04);
}

.chip--status {
  border-color: rgba(43, 230, 255, 0.5);
  color: var(--accent-alt);
}

.chip--threat {
  border-color: rgba(255, 255, 255, 0.2);
  color: var(--muted);
}

.chip--auth {
  border-color: rgba(255, 18, 79, 0.5);
  color: var(--accent);
}

.intel {
  margin-top: clamp(2.5rem, 6vw, 4rem);
  display: grid;
  gap: clamp(1.5rem, 3vw, 2.5rem);
}

.intel--grid {
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  align-items: stretch;
}

.intel__card {
  background: rgba(10, 16, 28, 0.82);
  border: 1px solid var(--panel-border);
  padding: clamp(1.8rem, 3vw, 2.4rem);
  box-shadow: 0 20px 60px rgba(3, 5, 10, 0.6);
  position: relative;
}

.intel__card--primary::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(43, 230, 255, 0.12), rgba(255, 18, 79, 0.08));
  opacity: 0.7;
  pointer-events: none;
}

.intel__card h2 {
  font-family: "Orbitron", sans-serif;
  letter-spacing: 0.3rem;
  text-transform: uppercase;
  margin: 0 0 1.5rem;
  position: relative;
  z-index: 1;
}

.intel__card p {
  color: var(--muted);
  line-height: 1.6;
  position: relative;
  z-index: 1;
}

.highlight {
  margin-top: 1.5rem;
  padding: 1.2rem 1.4rem;
  border-left: 3px solid var(--accent);
  background: rgba(255, 18, 79, 0.08);
  color: var(--text);
  font-size: 1rem;
}

.intel__media {
  background: rgba(6, 10, 18, 0.9);
  border: 1px solid var(--card-border);
  padding: 1.2rem;
  display: grid;
  place-items: center;
  position: relative;
}

.intel__media::after {
  content: attr(data-label);
  position: absolute;
  top: 0.6rem;
  left: 1rem;
  font-size: 0.7rem;
  letter-spacing: 0.3rem;
  text-transform: uppercase;
  color: rgba(255, 255, 255, 0.45);
}

.intel__media img {
  max-width: 100%;
  height: auto;
  filter: saturate(1.1) contrast(1.05) drop-shadow(0 20px 35px rgba(3, 5, 10, 0.7));
}

.intel--metrics {
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
}

.metric {
  background: rgba(8, 12, 20, 0.82);
  border: 1px solid var(--panel-border);
  padding: 1.8rem;
  box-shadow: 0 18px 45px rgba(3, 5, 10, 0.6);
}

.metric h3 {
  margin-top: 0;
  font-family: "Orbitron", sans-serif;
  text-transform: uppercase;
  letter-spacing: 0.25rem;
}

.metric ul {
  padding-left: 1.3rem;
  color: var(--muted);
  margin: 0;
  display: grid;
  gap: 0.6rem;
}

.metric p {
  color: var(--muted);
  line-height: 1.6;
}

.metric__callout {
  margin-top: 1.1rem;
  padding: 1rem;
  border: 1px dashed rgba(255, 255, 255, 0.2);
  text-transform: uppercase;
  letter-spacing: 0.18rem;
  color: var(--text);
  text-align: center;
}

.metric dl {
  margin: 0;
  display: grid;
  gap: 0.8rem;
}

.metric dl div {
  display: flex;
  justify-content: space-between;
  border-bottom: 1px solid rgba(255, 255, 255, 0.12);
  padding-bottom: 0.4rem;
}

.metric dt {
  text-transform: uppercase;
  letter-spacing: 0.18rem;
}

.metric dd {
  margin: 0;
  color: var(--accent-alt);
  font-weight: bold;
}

.intel--timeline {
  border: 1px solid var(--panel-border);
  background: rgba(6, 10, 18, 0.9);
  padding: clamp(2rem, 4vw, 3rem);
  box-shadow: 0 20px 60px rgba(3, 5, 10, 0.65);
}

.intel--timeline h2 {
  margin: 0 0 1.5rem;
  font-family: "Orbitron", sans-serif;
  text-transform: uppercase;
  letter-spacing: 0.3rem;
}

.timeline {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: 1.1rem;
}

.timeline li {
  display: grid;
  grid-template-columns: 120px 1fr;
  align-items: center;
  gap: 1.5rem;
  padding: 1.1rem 1.4rem;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(255, 255, 255, 0.02);
}

.timeline__time {
  font-family: "Orbitron", sans-serif;
  text-transform: uppercase;
  letter-spacing: 0.18rem;
  color: var(--accent);
}

.timeline__desc {
  color: var(--muted);
  line-height: 1.5;
}

.dossier__footer {
  margin-top: clamp(3rem, 6vw, 4.5rem);
  text-align: center;
  color: rgba(255, 255, 255, 0.45);
  text-transform: uppercase;
  letter-spacing: 0.25rem;
}

.fuse {
  position: fixed;
  left: 50%;
  bottom: 2rem;
  transform: translateX(-50%);
  z-index: 5;
  opacity: 0;
  transition: opacity 0.6s ease;
}

body.ready .fuse {
  opacity: 1;
}

.fuse__wrapper {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.75rem 1.2rem;
  background: rgba(8, 12, 20, 0.85);
  border: 1px solid rgba(255, 255, 255, 0.12);
  box-shadow: 0 12px 40px rgba(3, 5, 10, 0.8);
}

.fuse__label {
  text-transform: uppercase;
  letter-spacing: 0.25rem;
  font-size: 0.7rem;
  color: var(--muted);
}

.fuse__track {
  position: relative;
  width: min(42vw, 420px);
  height: 10px;
  background: rgba(255, 255, 255, 0.08);
  overflow: hidden;
  border-radius: 999px;
}

.fuse__progress {
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, rgba(255, 18, 79, 0.1), rgba(255, 18, 79, 0.55));
  transform-origin: left;
  transform: scaleX(1);
}

.fuse__spark {
  position: absolute;
  top: 50%;
  left: 0;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: radial-gradient(circle, #fff 0%, rgba(255, 196, 0, 0.8) 45%, transparent 70%);
  filter: drop-shadow(0 0 12px rgba(255, 196, 0, 0.8));
  transform: translate(-50%, -50%);
  animation: spark-pulse 0.6s ease-in-out infinite;
}

.fuse__time {
  font-family: "Orbitron", sans-serif;
  font-size: 1.1rem;
  color: var(--accent-alt);
}

.warning {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: radial-gradient(circle at center, rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.95));
  z-index: 60;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.6s ease;
}

.warning.active {
  opacity: 1;
}

.warning__panel {
  padding: 2.5rem 3.5rem;
  border: 2px solid rgba(255, 196, 0, 0.8);
  background: rgba(32, 18, 0, 0.85);
  box-shadow: 0 0 40px rgba(255, 196, 0, 0.6);
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 0.25rem;
}

.warning__headline {
  margin: 0 0 1rem;
  font-size: 1.4rem;
  color: rgba(255, 196, 0, 0.95);
}

.warning span[data-count] {
  font-size: 1.8rem;
  color: var(--accent);
}

.detonation {
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0;
  z-index: 80;
}

.detonation.active {
  opacity: 1;
}

.detonation__flash,
.detonation__core,
.detonation__shockwave,
.detonation__embers,
.detonation__smoke {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.detonation__flash {
  background: radial-gradient(circle, rgba(255, 255, 255, 0.9), transparent 60%);
  mix-blend-mode: screen;
  opacity: 0;
}

.detonation__core {
  background: radial-gradient(circle, rgba(255, 120, 0, 0.9), transparent 55%);
  opacity: 0;
}

.detonation__shockwave {
  border: 2px solid rgba(255, 196, 0, 0.9);
  border-radius: 50%;
  width: 10vmin;
  height: 10vmin;
  margin: auto;
  opacity: 0;
}

.detonation__embers {
  background: radial-gradient(circle at 30% 30%, rgba(255, 120, 0, 0.4), transparent 60%),
    radial-gradient(circle at 70% 60%, rgba(255, 80, 0, 0.3), transparent 65%);
  filter: blur(8px);
  opacity: 0;
}

.detonation__smoke {
  background: radial-gradient(circle at 40% 40%, rgba(40, 40, 40, 0.85), transparent 60%),
    radial-gradient(circle at 70% 70%, rgba(25, 25, 25, 0.8), transparent 65%);
  opacity: 0;
}

body.engulfed {
  animation: camera-shake 0.5s linear infinite;
  overflow: hidden;
}

body.engulfed .dossier,
body.engulfed .fuse {
  filter: blur(6px) brightness(0.6);
}

body.engulfed .scene-backdrop {
  filter: saturate(1.2) brightness(0.8);
}

@keyframes scan {
  0%,
  100% {
    transform: translateY(-120%);
  }
  50% {
    transform: translateY(160%);
  }
}

@keyframes twinkle {
  0%,
  100% {
    transform: translate3d(0, 0, 0);
  }
  50% {
    transform: translate3d(0, -10px, 0);
  }
}

@keyframes grid-drift {
  0% {
    transform: perspective(700px) rotateX(62deg) translateY(25%) translateZ(0);
  }
  100% {
    transform: perspective(700px) rotateX(62deg) translateY(25%) translateZ(60px);
  }
}

@keyframes spark-pulse {
  0%,
  100% {
    box-shadow: 0 0 15px rgba(255, 196, 0, 0.85);
    transform: translate(-50%, -50%) scale(1);
  }
  50% {
    box-shadow: 0 0 25px rgba(255, 120, 0, 0.9);
    transform: translate(-50%, -50%) scale(1.1);
  }
}

@keyframes shockwave-expand {
  0% {
    transform: scale(0.2);
    opacity: 1;
  }
  100% {
    transform: scale(8);
    opacity: 0;
  }
}

@keyframes flash-burst {
  0% {
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

@keyframes ember-rise {
  0% {
    opacity: 0.9;
    transform: scale(0.8);
  }
  100% {
    opacity: 0;
    transform: scale(1.6) translateY(-10vh);
  }
}

@keyframes smoke-rise {
  0% {
    opacity: 0.7;
    transform: scale(0.7) translateY(10vh);
  }
  100% {
    opacity: 0;
    transform: scale(1.4) translateY(-10vh);
  }
}

@keyframes camera-shake {
  0% {
    transform: translate(0, 0) rotate(0deg);
  }
  20% {
    transform: translate(-4px, 2px) rotate(-0.4deg);
  }
  40% {
    transform: translate(3px, -4px) rotate(0.4deg);
  }
  60% {
    transform: translate(-3px, 4px) rotate(0.2deg);
  }
  80% {
    transform: translate(4px, -2px) rotate(-0.3deg);
  }
  100% {
    transform: translate(0, 0) rotate(0deg);
  }
}

body.engulfed .detonation__flash {
  animation: flash-burst 1.2s ease forwards;
}

body.engulfed .detonation__core {
  animation: flash-burst 1.4s ease forwards;
}

body.engulfed .detonation__shockwave {
  animation: shockwave-expand 1.6s ease forwards;
}

body.engulfed .detonation__embers {
  animation: ember-rise 2.5s ease forwards;
}

body.engulfed .detonation__smoke {
  animation: smoke-rise 3.5s ease forwards;
}

@media (max-width: 768px) {
  .dossier {
    padding: 5rem 1.25rem 7rem;
  }

  .timeline li {
    grid-template-columns: 1fr;
    text-align: center;
  }

  .timeline__time {
    justify-self: center;
  }

  .fuse__wrapper {
    flex-direction: column;
    align-items: stretch;
  }

  .fuse__track {
    width: min(72vw, 320px);
  }
}
